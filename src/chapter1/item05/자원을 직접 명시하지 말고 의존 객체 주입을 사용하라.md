# ğŸ’¡ ì˜ì¡´ê´€ê³„ ì£¼ì… ì˜ˆì‹œ
* ì˜¨ë¼ì¸ì‡¼í•‘ëª°ì˜ í• ì¸ì •ì±…ì„ ìƒê°í•´ë³´ì.
* 20,000ì›ì„ 10%í• ì¸í•´ì„œ 18,000ì›ì— êµ¬ë§¤í•  ìˆ˜ ìˆê³ , 1,000ì› í• ì¸í•˜ì—¬ 19,000ì›ì— êµ¬ë§¤í•  ìˆ˜ë„ ìˆë‹¤.
* ì´ëŸ° í• ì¸ì •ì±…ì€ ì‡¼í•‘ëª°ì˜ ì •ì±…ì— ë”°ë¼ ìˆ˜ì‹œë¡œ ë³€ê²½ë  ìˆ˜ ìˆë‹¤.


â–¶ï¸ DiscountPolicy ì¸í„°í˜ì´ìŠ¤
```java
public interface DiscountPolicy {

    int discount(int price);

}
```
* ìš°ë¦¬ëŠ” ê²°ì œí•  ë•Œ í• ì¸í•˜ëŠ” ëª¨ë“  ì½”ë“œì— DiscountPolicyì˜ `discount` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ê²ƒì´ë‹¤.
* ì •ì•¡í• ì¸ê³¼ ê³ ì •í• ì¸ êµ¬í˜„ì²´ë¥¼ ì‚´í´ë³´ì.

â–¶ï¸ RateDiscountPolicy êµ¬í˜„ì²´
```java
public class RateDiscountPolicy implements DiscountPolicy {

    private final int discountPercent = 10;

    // 10% í• ì¸
    @Override
    public int discount(int price) {
        System.out.println("ì •ì•¡í• ì¸ì´ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.");
        return price * (100 - discountPercent) / 100;
    }
}
```

â–¶ï¸ FixDiscountPolicy êµ¬í˜„ì²´
```java
public class FixDiscountPolicy implements DiscountPolicy {

    private final int discountAmount = 1000;

    // 1000ì› ê³ ì • í• ì¸
    @Override
    public int discount(int price) {
        System.out.println("ê³ ì •í• ì¸ì´ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.");
        return price - discountAmount;
    }
}
```

* ì´ì œ DiscountPolicyì˜ discountë¥¼ ì‚¬ìš©í•˜ëŠ” ì½”ë“œë¥¼ ë³´ì.

â–¶ï¸ OrderService
```java
public class OrderService {

    private final DiscountPolicy discountPolicy;

    public OrderService(DiscountPolicy discountPolicy) {
        this.discountPolicy = discountPolicy;
    }

    public void orderItem(int itemPrice) {
        // OrderService ì…ì¥ì—ì„œëŠ” discount()ê°€ ì–´ë–¤ í• ì¸ë°©ì‹ì¸ì§€(ì •ì•¡í• ì¸ or ê³ ì •í• ì¸) ëª¨ë¥¸ë‹¤.
        // ì™¸ë¶€(OrderConfig)ì—ì„œ DiscountPolicy ì˜ êµ¬í˜„ì²´ë¥¼ ì£¼ì…(ì˜ì¡´ê´€ê³„ ì£¼ì…) í•´ì£¼ì—ˆê¸° ë•Œë¬¸ì— ì¶”ìƒí™”ì— ì˜ì¡´í•˜ì—¬ ìì‹ ì˜ ì—­í• ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.
        // ì´ë ‡ê²Œ ë˜ë©´ í´ë¼ì´ì–¸íŠ¸(OrderService)ì˜ ìˆ˜ì • ì—†ì´(OCPì›ì¹™) ë‹¤ì–‘í•œ í• ì¸ì •ì±…ì„ ë„ì…í•  ìˆ˜ ìˆë‹¤.
        int discountedPrice = discountPolicy.discount(itemPrice);
        System.out.println("ì•„ì´í…œ ê°€ê²© = " + itemPrice);
        System.out.println("í• ì¸ëœ ê°€ê²© = " + discountedPrice);
    }
}
```
* ìœ„ ì½”ë“œì˜ í•µì‹¬ì€ OrderServiceëŠ” ìì‹ ì˜ í• ì¸ì •ì±…ì´ RateDiscountPolicy(ì •ì•¡í• ì¸)ì¸ì§€, FixDiscountPolicy(ê³ ì •í• ì¸)ì¸ì§€ ì „í˜€ ëª¨ë¥¸ë‹¤.
* ê·¸ë ‡ë‹¤ë©´ ëˆ„êµ°ê°€ê°€ OrderServiceì˜ DiscountPolicyë¥¼ ê²°ì •í•´ì£¼ì–´ì•¼ í•œë‹¤.
* ê·¸ë˜ì„œ ë“±ì¥í•œ ê²ƒì´ ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ë‹¤. (ì—¬ê¸°ì„œëŠ” OrderConfigê°€ ì´ ì—­í• ì„ ìˆ˜í–‰í•œë‹¤.)

â–¶ï¸ OrderConfig
```java
public class OrderConfig {

    OrderService orderService() {
        // ì˜ì¡´ê´€ê³„ ì£¼ì…
        return new OrderService(new FixDiscountPolicy());
    }

}
```
* OrderConfigì˜ ë„ì›€ìœ¼ë¡œ OrderServiceì˜ í• ì¸ì •ì±…ì´ ê²°ì •ë˜ì—ˆë‹¤.
* ì´ì œ í• ì¸ì •ì±…ì´ ëŠ˜ì–´ë‚˜ë„ ì‹¤ì œ í• ì¸ì •ì±…ì„ ì‚¬ìš©í•˜ëŠ” OrderServiceì…ì¥ì—ì„œëŠ” ì–´ë–¤ í• ì¸ì •ì±…ì´ ì™€ë„ ìì‹ ì˜ ì½”ë“œëŠ” ìˆ˜ì •í•  í•„ìš”ê°€ ì—†ë‹¤.(OCPì›ì¹™ - ìˆ˜ì •ì— ë‹«í˜€ ìˆë‹¤.)
* í• ì¸ì •ì±…ì´ ëŠ˜ì–´ë‚˜ë”ë¼ë„ OrderConfigë¥¼ ê³ ì³ì£¼ë©´ ëœë‹¤.(OCPì›ì¹™ - í™•ì¥ì— ì—´ë ¤ìˆë‹¤.)

# ğŸ’¡ DIí”„ë ˆì„ì›Œí¬?
* ìš°ë¦¬ê°€ ì‚¬ë‚´ì—ì„œ ì‚¬ìš©í•˜ëŠ”, ê·¸ë¦¬ê³  ë„ë¦¬ ì•Œë ¤ì§„ DIí”„ë ˆì„ì›Œí¬ì— Springì´ ìˆë‹¤.
* ì§€ê¸ˆ ìš°ë¦¬ê°€ ì‘ì„±í•œ OrderConfigì—­í• (DI)ì„ ìŠ¤í”„ë§ì´ ëŒ€ì‹  ìˆ˜í–‰í•´ì£¼ë©°, ìŠ¤í”„ë§ì´ ì´ ëŒ€ìƒë“¤ì„ ê´€ë¦¬í•˜ê²Œ ë˜ë©´ì„œ ì œì–´ì˜ ì£¼ì²´ê°€ ì—­ì „(IoC) ëœë‹¤.
* ì œì–´ê°€ ì—­ì „ë˜ë©´ì„œ @PostConstructì™€ ê°™ì€ ìŠ¤í”„ë§ ë¹ˆ(ê´€ë¦¬ëŒ€ìƒ)ì˜ ìƒëª…ì£¼ê¸°(ê°ì²´ì˜ ìƒì„±, ì´ˆê¸°í™”, ì†Œë©¸, ë©”ì„œë“œ í˜¸ì¶œ ë“±) ê¹Œì§€ í”„ë¡œê·¸ë˜ë¨¸ëŠ” ê°„ë‹¨í•˜ê²Œ ì´ìš©í•  ìˆ˜ ìˆê²Œ ëœë‹¤.
