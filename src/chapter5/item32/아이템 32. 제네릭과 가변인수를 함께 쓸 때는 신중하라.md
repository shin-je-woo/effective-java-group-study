# ğŸ’¡ ì œë„¤ë¦­ê³¼ ê°€ë³€ì¸ìˆ˜ë¥¼ í•¨ê»˜ ì“¸ ë•ŒëŠ” ì‹ ì¤‘í•˜ë¼

## 1. ê°€ë³€ì¸ìˆ˜ ë©”ì„œë“œì˜ í—ˆì 
### 1) ë³¸ë”” ëª©ì ì€ ë‚´ë¶€ ë°ì´í„° ì „ë‹¬ì´ë©° í´ë¼ì´ì–¸íŠ¸ì— ê³µê°œê°€ ë˜ë©´ì„œ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.
### 2) íƒ€ì… ì•ˆì •ì„±ì´ ê¹¨ì§„ë‹¤.
- ë³€ìˆ˜ì— ì œë„¤ë¦­ì´ë‚˜ ë§¤ê°œë³€ìˆ˜í™” íƒ€ì…ì´ í¬í•¨ë˜ë©´ ì•Œê¸° ì–´ë ¤ìš´ ì»´íŒŒì¼ ê²½ê³ ê°€ ë°œìƒí•œë‹¤.

```java
public class Dangerous {
    static void dangerous(List<String>... stringList){
        List<Integer> integers = List.of(42);
        Object[] objects = stringList;
        objects[0] = integers;
        String s = stringList[0].get(0); //ClassCastException
    }

    public static void main(String[] args) {
        List<String> strings = List.of("A");
        dangerous(strings);
    }
}
```

## 2. @SafeVarargs ì• ë„ˆí…Œì´ì…˜
* ì œë„¤ë¦­ ê°€ë³€ì¸ìˆ˜ ë©”ì„œë“œì˜ ê²½ê³ ë¥¼ ìˆ¨ê¸°ë©° ë©”ì„œë“œ ì‘ì„±ìê°€ ê·¸ ë©”ì„œë“œê°€ íƒ€ì… ì•ˆì „í•¨ì„ ë³´ì¥í•œë‹¤.

## 3. ì•ˆì „í•œ íƒ€ì…ì´ ë˜ë ¤ë©´?
### 1) ë‹¤ë¥¸ ë°°ì—´ì— ì €ì¥í•˜ì—¬ ì¡°ì‘í•˜ëŠ” í–‰ìœ„ë“±ì€ ì•ˆì „í•˜ì§€ ì•Šë‹¤.
```java
//í•´ë‹¹ ë©”ì„œë“œì˜ ë°°ì—´ íƒ€ì…ì€ ë©”ì„œë“œì— ì¸ìˆ˜ë¥¼ ë„˜ê¸°ëŠ” ì»´íŒŒì¼ íƒ€ì„ì— ê²°ì •ë˜ëŠ”ë°, íƒ€ì…ì„ ì˜ëª» íŒë‹¨í•  ìˆ˜ ìˆë‹¤.
tatic <T> T[] toArray(T... args) {
    return args;
}
```
### 2) ë°°ì—´ì´ ë³€ê²½ë˜ì§€ ì•Šê³ , ë°°ì—´ì˜ ì°¸ì¡°ê°€ ë°–ìœ¼ë¡œ ë…¸ì¶œë˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì•ˆì „í•˜ë‹¤. (ìˆœìˆ˜ ì „ë‹¬ë§Œ í•œë‹¤ë©´ ì•ˆì „) 
### 3) ë§¤ê°œë³€ìˆ˜ ë°°ì—´ì— ì•„ë¬´ê²ƒë„ ì €ì¥í•˜ì§€ ì•Šê³ ë„ íƒ€ì… ì•ˆì •ì„±ì„ ê¹° ìˆ˜ ìˆìœ¼ë‹ˆ ì£¼ì˜í•˜ì.
* ì œë„¤ë¦­ varargs ë§¤ê°œë³€ìˆ˜ ë°°ì—´ì— ë‹¤ë¥¸ ë©”ì„œë“œê°€ ì ‘ê·¼í•˜ë„ë¡ í—ˆìš©í•˜ë©´ ì•ˆì „í•˜ì§€ ì•Šë‹¤.
```java
// ë¯¸ë¬˜í•œ í™ ì˜¤ì—¼ ë°œìƒ (193-194ìª½)
public class PickTwo {
    // ì½”ë“œ 32-2 ìì‹ ì˜ ì œë„¤ë¦­ ë§¤ê°œë³€ìˆ˜ ë°°ì—´ì˜ ì°¸ì¡°ë¥¼ ë…¸ì¶œí•œë‹¤. - ì•ˆì „í•˜ì§€ ì•Šë‹¤! (193ìª½)
    static <T> T[] toArray(T... args) {
        return args;
    }

    static <T> T[] pickTwo(T a, T b, T c) {
        switch(ThreadLocalRandom.current().nextInt(3)) {
            case 0: return toArray(a, b); //Object íƒ€ì…ì„ ë°˜í™˜í•˜ê²Œ ë¨
            case 1: return toArray(a, c);
            case 2: return toArray(b, c);
        }
        throw new AssertionError(); // ë„ë‹¬í•  ìˆ˜ ì—†ë‹¤.
    }

    public static void main(String[] args) { // (194ìª½)
        String[] attributes = pickTwo("ì¢‹ì€", "ë¹ ë¥¸", "ì €ë ´í•œ");
        System.out.println(Arrays.toString(attributes));
    }
}
```

### 4) ì•ˆì „í•œ íƒ€ì…ì˜ ì˜ˆì‹œ
- ê°’ì„ ë°›ì•„ ìƒˆë¡œìš´ ë¦¬ìŠ¤íŠ¸ë¡œ ì˜®ê²¨ë‹®ì•„ ë°˜í™˜í•œë‹¤.
- @SafeVarargsì˜ ì¡°ê±´ì€ ë§¤ê°œë³€ìˆ˜ ë°›ì€ ë°°ì—´ì„ ìˆ˜ì •í•˜ì§€ ì•Šê³  ì™¸ë¶€ ë©”ì„œë“œì— ë…¸ì¶œí•˜ì§€ ì•ŠëŠ”ë‹¤.
```java
public class FlattenWithVarargs {
    @SafeVarargs
    static <T> List<T> flatten(List<? extends T>... lists) {
        List<T> result = new ArrayList<>();
        for (List<? extends T> list : lists) //ìƒˆë¡œ ì˜®ê²¨ë‹®ìŒ
            result.addAll(list);
        return result;
    }

    public static void main(String[] args) {
        List<Integer> flatList = flatten(
                List.of(1, 2), List.of(3, 4, 5), List.of(6,7));
        System.out.println(flatList);
    }
}
```

## 4. listë¡œ ë³€ê²½í•˜ë¼
* ì •ì  íŒ©í„°ë¦¬ ë©”ì„œë“œì¸ List.ofì„ í™œìš©í•˜ë©´ ê°€ë³€ ê°œìˆ˜ì˜ ì¸ìˆ˜ë¥¼ ë„˜ê¸¸ ìˆ˜ ìˆë‹¤.
* List.ofì—ë„ @SafeVarargs ì• ë„ˆí…Œì´ì…˜ì´ ìˆìœ¼ë¯€ë¡œ ê°œë°œìê°€ íŒë‹¨ í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.
* ì½”ë“œ ì§€ì €ë¶„í•´ì§ ë° ì†ë„ ì´ìŠˆê°€ ìˆì„ ìˆ˜ ìˆë‹¤.

```java
public class FlattenWithList {
    static <T> List<T> flatten(List<List<? extends T>> lists) {
        List<T> result = new ArrayList<>();
        for (List<? extends T> list : lists)
            result.addAll(list);
        return result;
    }

    public static void main(String[] args) {
        List<Integer> flatList = flatten(List.of(
                List.of(1, 2), List.of(3, 4, 5), List.of(6,7)));
        System.out.println(flatList);
    }
}
```
```java
public class SafePickTwo {
    static <T> List<T> pickTwo(T a, T b, T c) {
        switch(ThreadLocalRandom.current().nextInt(3)) {
            case 0: return List.of(a, b);
            case 1: return List.of(a, c);
            case 2: return List.of(b, c);
        }
        throw new AssertionError();
    }

    public static void main(String[] args) {
        List<String> attributes = pickTwo("ì¢‹ì€", "ë¹ ë¥¸", "ì €ë ´í•œ");
        System.out.println(attributes);
    }
}
```